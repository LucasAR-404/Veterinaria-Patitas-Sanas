<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro Veterinario Patitas Sanas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
</head>
<body>

<header class="header" id="Inicio">
    <div class="menu">
        <div class="logo">
            <a href="#" class="logo"><img src="img/logo.png" alt="Logo Patitas Sanas"></a>
        </div>

        <input type="checkbox" id="menu-toggle">
        <label for="menu-toggle">
            <img src="img/menu.png" class="menu-icono" alt="Menú">
        </label>

        <nav class="navbar">
            <ul>
                <li><a href="#Inicio">Inicio</a></li>
                <li><a href="#Nosotros">Nosotros</a></li>
                <li><a href="#Servicios">Servicios</a></li>
                <li><a href="#Productos">Productos</a></li>
                <li><a href="#Contacto">Contacto</a></li>
            </ul>

            <div class="nav-buttons">
                
                <button onclick="toggleCarrito()" title="Carrito de Compras" class="cart-btn">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="contador-carrito">0</span>
                </button>
            </div>
        </nav>
    </div>

    <div class="header-content container">
        <div class="header-left">
            <h1>Centro Veterinario Patitas Sanas</h1>
            <p>
                Cuidamos la salud de tus mascotas con dedicación, amor y la más alta calidad profesional.
            </p>
            <a href="#Contacto" class="btn-1">Agenda una consulta</a>
        </div>
        <div class="header-right">
            <img src="img/left.png" alt="Atención veterinaria">
        </div>
    </div>
</header>

<section class="publicidad-section">
    <div class="container">
        <a href="#Productos">
            <img src="img/publicidad.png" alt="Ofertas especiales en productos para mascotas" class="publicidad-img">
        </a>
    </div>
</section>

<section class="about" id="Nosotros">
    <div class="container">
        <div class="about-content">
            <div class="about-img">
                <img src="img/about.png" alt="Sobre nosotros">
            </div>

            <div class="about-text">
                <h2>Nosotros</h2>
                <p>
                    En <strong>Patitas Sanas</strong> trabajamos para garantizar el bienestar integral de cada mascota.
                    Nuestro centro se inspira en el amor por los animales y en el compromiso con la medicina veterinaria moderna.
                    Con un equipo profesional altamente capacitado, ofrecemos atención personalizada,
                    comprendiendo que cada compañero peludo es único y merece el mejor trato posible.
                    Nos enfocamos en brindar diagnósticos precisos, tratamientos efectivos y un acompañamiento humano,
                    siempre priorizando la comodidad y tranquilidad de nuestros pacientes y sus familias.
                </p>
            </div>
        </div>
    </div>
</section>

<main class="servicios" id="Servicios">
    <div class="container">
        <h2>Servicios</h2>
        <div class="servicios-content">

            <div class="servicio-1" onclick="mostrarEspecialidad('clinica')">
                <i class="fa-solid fa-stethoscope"></i>
                <h3>Atención clínica general</h3>
            </div>

            <div class="servicio-1" onclick="mostrarEspecialidad('vacunacion')">
                <i class="fa-solid fa-syringe"></i>
                <h3>Vacunación</h3>
            </div>

            <div class="servicio-1" onclick="mostrarEspecialidad('cirugia')">
                <i class="fa-solid fa-kit-medical"></i>
                <h3>Cirugía</h3>
            </div>

        </div>

        <div id="info-clinica" class="info-especialidad" style="display: none;">
            <div class="fondo-translucido">
                <img src="img/dermatologia.png" alt="Veterinario general">
                <p><strong>Dra. Julia Paz</strong></p>
                <p>Especialidad: Atención clínica general</p>
                <p>Matrícula: 10234</p>
            </div>
        </div>

        <div id="info-vacunacion" class="info-especialidad" style="display: none;">
            <div class="fondo-translucido">
                <img src="img/endocrinologia.png" alt="Vacunación veterinaria">
                <p><strong>Dra. Fernanda Rios</strong></p>
                <p>Especialidad: Vacunación y bienestar animal</p>
                <p>Matrícula: 20458</p>
            </div>
        </div>

        <div id="info-cirugia" class="info-especialidad" style="display: none;">
            <div class="fondo-translucido">
                <img src="img/ginecologia.png" alt="Cirugía veterinaria">
                <p><strong>Dra. Maria Perez</strong></p>
                <p>Especialidad: Cirugía veterinaria avanzada</p>
                <p>Matrícula: 30577</p>
            </div>
        </div>
    </div>
</main>

<section class="productos" id="Productos">
    <div class="container">
        <h2>Nuestros Productos</h2>
        <div class="productos-content">
            <div class="producto">
                <img src="img/gato.png" alt="Alimento para Gatos" class="producto-img">
                <h3>Alimento Premium para Gatos</h3>
                <p class="precio">$4.500</p>
                <p class="descripcion">Alimento balanceado con todos los nutrientes que tu gato necesita.</p>
                <button class="btn-agregar" data-id="1" data-nombre="Alimento para Gatos" data-precio="4500" data-imagen="img/gato.png">Agregar al Carrito</button>
            </div>
            
            <div class="producto">
                <img src="img/perro.png" alt="Alimento para Perros" class="producto-img">
                <h3>Alimento Premium para Perros</h3>
                <p class="precio">$5.200</p>
                <p class="descripcion">Alimento balanceado para perros de todas las razas y edades.</p>
                <button class="btn-agregar" data-id="2" data-nombre="Alimento para Perros" data-precio="5200" data-imagen="img/perro.png">Agregar al Carrito</button>
            </div>
        </div>
    </div>
</section>

<section class="formulario" id="Contacto">
    <div class="container">
        <div class="formulario-contenedor">
            <form onsubmit="enviarConsultaFirebase(event)" autocomplete="off">
                <h2>Agenda tu Consulta</h2>
                <div class="input-group">
                    <div class="input-container">
                        <input type="text" name="name" placeholder="Nombre y Apellido" required>
                        <i class="fa-solid fa-user"></i>
                    </div>

                    <div class="input-container">
                        <input type="tel" name="phone" placeholder="Número de teléfono" required>
                        <i class="fa-solid fa-phone"></i>
                    </div>

                    <div class="input-container">
                        <input type="email" name="email" placeholder="Correo electrónico" required>
                        <i class="fa-solid fa-envelope"></i>
                    </div>

                    <div class="input-container">
                        <textarea name="mensaje" placeholder="Detalles de la consulta"></textarea>
                    </div>

                    <input type="submit" class="btn" value="Enviar Consulta">
                </div>
            </form>
            <div class="mapa">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3560.102370777536!2d-65.3053846849681!3d-26.83672208316093!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94225d3ad7f30f1d%3A0xf8606cd659b8e3e4!2sAconquija%20123%2C%20Yerba%20Buena%2C%20Tucum%C3%A1n!5e0!3m2!1ses!2sar!4v1620830000000!5m2!1ses!2sar" 
                    width="100%" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="">
                </iframe>
            </div>
        </div>
    </div>
</section>

<div id="carrito" class="carrito">
    <div class="carrito-header">
        <h3>Carrito de Compras</h3>
        <button class="cerrar-carrito" onclick="toggleCarrito()">&times;</button>
    </div>
    <div class="carrito-body">
        <div id="lista-carrito" class="lista-carrito">
        </div>
        <div class="carrito-footer">
            <div class="total-carrito">
                <p>Total: $<span id="total-carrito">0</span></p>
            </div>
            <button class="btn-comprar" onclick="finalizarCompra()">Finalizar Compra</button>
        </div>
    </div>
</div>

<div id="overlay" class="overlay" onclick="toggleCarrito()"></div>

<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-logo">
                <a href="#"><img src="img/logo.png" alt="Logo Patitas Sanas"></a>
                <div>
                    <h3>Centro Veterinario Patitas Sanas</h3>
                </div>
            </div>

            <div class="link">
                <ul>
                    <li><a href="#Inicio">Inicio</a></li>
                    <li><a href="#Nosotros">Nosotros</a></li>
                    <li><a href="#Servicios">Servicios</a></li>
                    <li><a href="#Productos">Productos</a></li>
                    <li><a href="#Contacto">Contacto</a></li>
                </ul>
            </div>

            <div class="contacto">
                <ul>
                    <li><h5>Dirección:</h5></li>
                    <li>Av Peron 450, Yerba Buena</li>
                    <li><h5>Email:</h5></li>
                    <li>atencion@centroveterinario.com</li>
                    <li><h5>Teléfono:</h5></li>
                    <li>(381) 6057 5678</li>
                </ul>
            </div>
        </div>

        <div class="footer-registro">
            <p>© 2025 Creado por Lucas Araujo.</p>
            <div class="footer-social">
        
            </div>
        </div>
    </div>
</footer>

<a href="https://wa.me/3873600517" class="whatsapp-flotante" target="_blank">
    <i class="fab fa-whatsapp"></i>
</a>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
    apiKey: "AIzaSyCDl29MiiZXkC5X_msoz-oJDAzuWlgaifQ",
    authDomain: "veterinaria-patitas-sanas.firebaseapp.com",
    projectId: "veterinaria-patitas-sanas",
    storageBucket: "veterinaria-patitas-sanas.firebasestorage.app",
    messagingSenderId: "698251295416",
    appId: "1:698251295416:web:da73055c876c29949e924d"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
</script>

<script>
async function enviarConsultaFirebase(event) {
    event.preventDefault();
    
    const consulta = {
        nombre: document.querySelector('input[name="name"]').value,
        telefono: document.querySelector('input[name="phone"]').value,
        email: document.querySelector('input[name="email"]').value,
        mensaje: document.querySelector('textarea[name="mensaje"]').value,
        fecha: new Date().toISOString(),
        estado: "nueva"
    };

    try {
        await db.collection("consultas").add(consulta);
        alert("Consulta enviada correctamente");
        document.querySelector('form').reset();
    } catch (error) {
        alert(" Error al enviar: " + error.message);
        console.error("Error Firebase:", error);
    }
}

function mostrarEspecialidad(especialidad) {
    document.querySelectorAll('.info-especialidad').forEach(i => i.style.display = 'none');
    var info = document.getElementById(`info-${especialidad}`);
    if (info) info.style.display = (info.style.display === 'block' ? 'none' : 'block');
}

let carrito = [];

function cargarCarrito() {
    const carritoGuardado = localStorage.getItem('carrito');
    if (carritoGuardado) {
        carrito = JSON.parse(carritoGuardado);
        actualizarCarrito();
    }
}

function guardarCarrito() {
    localStorage.setItem('carrito', JSON.stringify(carrito));
}

function toggleCarrito() {
    const carritoElement = document.getElementById('carrito');
    const overlay = document.getElementById('overlay');
    
    if (carritoElement.classList.contains('carrito-abierto')) {
        carritoElement.classList.remove('carrito-abierto');
        overlay.classList.remove('overlay-active');
    } else {
        carritoElement.classList.add('carrito-abierto');
        overlay.classList.add('overlay-active');
    }
}

function agregarAlCarrito(id, nombre, precio, imagen) {
    const idNum = Number(id);
    const precioNum = Number(precio);
    
    const productoExistente = carrito.find(item => item.id === idNum);
    
    if (productoExistente) {
        productoExistente.cantidad += 1;
    } else {
        carrito.push({
            id: idNum,
            nombre: nombre,
            precio: precioNum,
            imagen: imagen,
            cantidad: 1
        });
    }
    
    actualizarCarrito();
    guardarCarrito();
    mostrarNotificacion('✓ ' + nombre + ' agregado al carrito');
}

function eliminarDelCarrito(id) {
    carrito = carrito.filter(item => item.id !== id);
    actualizarCarrito();
    guardarCarrito();
}

function actualizarCantidad(id, nuevaCantidad) {
    if (nuevaCantidad <= 0) {
        eliminarDelCarrito(id);
        return;
    }
    
    const producto = carrito.find(item => item.id === id);
    if (producto) {
        producto.cantidad = nuevaCantidad;
        actualizarCarrito();
        guardarCarrito();
    }
}

function actualizarCarrito() {
    const listaCarrito = document.getElementById('lista-carrito');
    const contadorCarrito = document.getElementById('contador-carrito');
    const totalCarrito = document.getElementById('total-carrito');
    
    const totalItems = carrito.reduce((total, item) => total + item.cantidad, 0);
    contadorCarrito.textContent = totalItems;
    
    listaCarrito.innerHTML = '';
    
    if (carrito.length === 0) {
        listaCarrito.innerHTML = '<p class="carrito-vacio">El carrito está vacío</p>';
        totalCarrito.textContent = '0';
        return;
    }
    
    let total = 0;
    
    carrito.forEach(item => {
        const subtotal = item.precio * item.cantidad;
        total += subtotal;
        
        const elementoCarrito = document.createElement('div');
        elementoCarrito.className = 'item-carrito';
        elementoCarrito.innerHTML = `
            <div class="item-info">
                <img src="${item.imagen}" alt="${item.nombre}" class="item-img">
                <div class="item-detalles">
                    <h4>${item.nombre}</h4>
                    <p>$${item.precio.toLocaleString()}</p>
                </div>
            </div>
            <div class="item-controls">
                <button class="btn-cantidad" onclick="actualizarCantidad(${item.id}, ${item.cantidad - 1})">-</button>
                <span class="cantidad">${item.cantidad}</span>
                <button class="btn-cantidad" onclick="actualizarCantidad(${item.id}, ${item.cantidad + 1})">+</button>
                <button class="btn-eliminar" onclick="eliminarDelCarrito(${item.id})" title="Eliminar">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `;
        
        listaCarrito.appendChild(elementoCarrito);
    });
    
    totalCarrito.textContent = total.toLocaleString();
}

async function finalizarCompra() {
    if (carrito.length === 0) {
        mostrarNotificacion(' El carrito está vacío');
        return;
    }
    
    if (confirm('¿Estás seguro de que deseas finalizar la compra?')) {
        const venta = {
            fecha: new Date().toISOString(),
            productos: [...carrito],
            total: carrito.reduce((total, item) => total + (item.precio * item.cantidad), 0),
            estado: "completada",
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };

        try {
            await db.collection("ventas").add(venta);
            
            const comprasAnteriores = JSON.parse(localStorage.getItem('compras')) || [];
            comprasAnteriores.push(venta);
            localStorage.setItem('compras', JSON.stringify(comprasAnteriores));
            
            mostrarNotificacion('¡Compra realizada con éxito! ');
            carrito = [];
            actualizarCarrito();
            toggleCarrito();
            
        } catch (error) {
            console.error("Error guardando venta en Firebase:", error);
            alert(" Error al guardar la venta: " + error.message);
        }
    }
}

function mostrarNotificacion(mensaje) {
    const notificacionesAnteriores = document.querySelectorAll('.notificacion');
    notificacionesAnteriores.forEach(notif => {
        if (document.body.contains(notif)) {
            document.body.removeChild(notif);
        }
    });
    
    const notificacion = document.createElement('div');
    notificacion.className = 'notificacion';
    notificacion.textContent = mensaje;
    
    document.body.appendChild(notificacion);
    
    setTimeout(() => {
        notificacion.classList.add('mostrar');
    }, 10);
    
    setTimeout(() => {
        notificacion.classList.remove('mostrar');
        setTimeout(() => {
            if (document.body.contains(notificacion)) {
                document.body.removeChild(notificacion);
            }
        }, 300);
    }, 3000);
}

document.addEventListener('DOMContentLoaded', function() {
    cargarCarrito();
    
    document.querySelectorAll('.btn-agregar').forEach(button => {
        button.addEventListener('click', function() {
            const id = this.getAttribute('data-id');
            const nombre = this.getAttribute('data-nombre');
            const precio = this.getAttribute('data-precio');
            const imagen = this.getAttribute('data-imagen');
            
            agregarAlCarrito(id, nombre, precio, imagen);
        });
    });
    
    document.getElementById('overlay').addEventListener('click', toggleCarrito);
    
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            const carritoElement = document.getElementById('carrito');
            if (carritoElement.classList.contains('carrito-abierto')) {
                toggleCarrito();
            }
        }
    });
});
</script>

</body>
</html>